<template>
	<div class="page light">
		<div class="navbar navbar-style-1">
			<div class="navbar-inner">
				<div class="left">
					<a href="#" class="link back">
						<i class="icon flaticon-left"></i>
					</a>
				</div>
				<div class="title">Profile</div>
				<div class="right">
				</div>
			</div>
		</div>
		<div class="page-content content-area pt-80 bottom-sp80">
			<div class="container">
				<div class="profile-info mb-30">
					<div class="media">
						<img src="img/avatar/9.gif" alt="" />
					</div>
					<div class="info">
						<h5 class="item-title">{{user.name}}</h5>
						<!-- <span>Engineer</span> -->
						<p>{{role_txt}}</p>
					</div>
				</div>
				<div class="profile-info-list">
					<ul>
						<!-- <li>
							<label class="title">Full Name</label>
							<span class="value">Richard Brownlee</span>
						</li>
						<li>
							<label class="title">User Name</label>
							<span class="value">RichBrown</span>
						</li>
						<li>
							<label class="title">Phone</label>
							<span class="value">(+91) 123 456 7890</span>
						</li> -->
						<li>
							<label class="title">Email Address</label>
							<span class="value">{{user.email}}</span>
						</li>
						<li>
							<label class="title">Status Keanggotaan</label>
							<span class="value">{{active_txt}}</span>
						</li>
						<!-- <li>
							<label class="title">Shipping Address</label>
							<span class="value">Marmora Road City</span>
						</li>
						<li>
							<label class="title">Total Order</label>
							<span class="value">05</span>
						</li> -->
					</ul>
				</div>
			</div>
		</div>
		<div class="toolbar tabbar tabbar-labels toolbar-bottom menubar-area">
			<div class="toolbar-inner">
				<a href="/home/" class="tab-link active">
					<i class="flaticon-home"></i>
				</a>
				<a href="/new-product/" class="tab-link">
					<i class="flaticon-transfer-2"></i>
				</a>
				<a href="/my-loan/" class="tab-link cart-in">
					<i class="flaticon-shopping-cart"></i>
				</a>
				<!-- <a href="/wishlist/" class="tab-link">
					<i class="flaticon-like"></i>
				</a> -->
				<a href="/user/" class="tab-link active">
					<img src="img/avatar/1.jpg" class="user-media" alt="">
				</a>
			</div>
		</div>
	</div>
</template>

<script>
	return {
		data: function () {
			// Must return an object
			return {
				user: {
					name: "",
					id: 0,
					email: "",
					role: 0,
					is_active: 0,
				},
				token: "",
				role_txt: "",
				active_txt: "",
			}
		},
		methods: {},
		on: {
			pageInit: function () {
				var self = this;

				let tmp = self.$root.tesBaca("user")
				tmp = JSON.parse(tmp)

				if(tmp === null || tmp.token === undefined || tmp.user === undefined){
					self.$app.dialog.alert("Mohon login terlebih dahulu" || "Error");
					return app.views.main.router.navigate('/signin/', {reloadAll: true});
				}

				const mapRoleTxt = {
					4: "Super Admin",
					3: "Admin Koperasi",
					2: "Staff Koperasi",
					1: "Nasabah Koperasi"
				}

				const mapActiveTxt = {
					0: "Tidak Aktif",
					1: "Aktif"
				}

				self.$setState({
					token: tmp.token,
					user: tmp.user,
					role_txt: mapRoleTxt[tmp.user.role],
					active_txt: mapActiveTxt[tmp.user.is_active]
				});
			},
			pageBeforeOut: function () {
				var self = this;
			},
			pageBeforeRemove: function () {
				var self = this;
			},
		},
	}
</script>